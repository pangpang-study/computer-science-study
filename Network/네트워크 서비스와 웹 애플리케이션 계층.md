# 네트워크 서비스와 웹 애플리케이션 계층

## 웹 서비스화 트렌드
- 예전에는 독자적인 프로토콜을 자체정의해서 통신하는데 어려웠다
- HTTP라는 프로토콜이 전반적으로 넓게 보급되어있어 이 프로토콜을 기반으로 서비스를 만든다. 


## 애플리케이션 게층 
### 사용자가 직접 사용하며 체감하고 전송계층을 제외한 모든 영역
- 사용자가 직접 사용하는 프로토콜 : HTTP(웹 클라이언트 <-> 웹서버 웹 페이지 데이터)  , FTP(서버를 통한 파일통신)
- 사용자가 간접적으로 사용하는 프로토콜 : OS나 다른 애플리케이션 계층들이 간접적으로 사용 ,DNS(도메인 명과 IP어드레스 정보 변환) , SSL(데이터 암호화)

## HTTP
- 웹페이지가 표시되는 과정 : 웹 서버에 웹페이지를 요청 -> 해당 요청 웹페이지의 HTML파일 응답 -> 해당 내용에 필요한 CSS,JPEG 등이 필요하면 전부 새로운 요청으로 받음 
- HTTP 메시지 : 클라이언트 PC 와 웹서버 사이의 애플리케이션 통신프로토콜 = HTTP , 그 사이에서 주고받은 정보 = HTTP 메시지 , 만약 응답인 경우 BODY에 데이터르르 담는다.
- HTTP는 한번의 통신 후에는 바로 통신을 끊고 상태정보를 저장하지 않는다.  = Stateless , 대신 연결상태는 지속하는 설정을 한다 = kepp alive(연결상태를 끊는다고 해야 끊어진다) , 한번의 통신을 여러번한다.
- HTTP요청을 보내기 위해서는 URL이라는 문자열을 사용한다. 
- HTTP요청에 대한 응답 : 상태 + 헤더 + 바디
- 상태코드 : 100번대(정보) , 200번대(성공정보) , 300번대(경로전환) , 400번대(에러정보)

## 웹서비스와 웹애플리케이션
- 웹 브라우저의 웹페이지 요청 : 웹서버가 미리 만들어둔 정적 HTML파일의 데이터 응답
- 웹 서비스 요청 : 웹 서버의 서버 프로그램이 HTML데이터를 동적으로 만들어서 응답
- 웹페이지와 웹 서비스의 차이 : 정적 HTML파일로 응답하느냐 , 서버 프로그램이 HTML 데이터를 만들어서 응답하느냐의 차이
    ### GET방식과 POST 방식
    - GET은 입력 폼의 내용이 URL내에 포함되어 보내지고 POST는 내용이 BODY에 포함된다. 

    ### 웹 서비스의 사용성을 높여주는 AJAX 
    - HTTP메시지로 통신한다는 점에서는 비슷하다
    - 하지만 요청을 보내는 주체가 브라우저가 아닌 "자바스크립트로 작성된 프로그램"이 웹서버와 통신
    - 응답결과로 받은 전체 페이지를 화면을 갱신하느 방식이 아닌 특정부분에만 응답받은 내용이 갱신 (구글 유사 키워드)

## 세션을 유지하기 위한 쿠키 
- HTTP = Statless 따라서 요청 응답 한번후 통신 끊어짐 -> 상태정보 저장 x 
- 그럼 여러번 요청을 보내면 ?? -> 누가 보냈는지 확인 어려움 
- 여러 건의 요청처리에 대한 사용자 접속세션을 인식하기 위한 쿠키를 사용
    ### 쿠키
    - 웹 브라우저 : 응답받은 메시지제 set-cookie 문자열 확인 -> 로컬 디스크에 쿠키형태로 저장
    - 보안문제 해결 필요 : 동일한 도메인 사용하는 사이트에만 쿠키전송허용 , 저장된 쿠키들에 대한 유효기간 확인
    - 쿠키는 서버쪽에 저장하는 것이 원칙, 동일한 사용자 식별을 위한 세션 ID등의 식별정보만 클라이언트에 쿠키로 저장

## 이메일 
- 발신과 수신할때의 통신 프로토콜이 다르다
- 발신 : SMPT ,  수신 : POP3
- SMPT : 클라이언트PC가 메일 서버로 메일을 보낼 때, 메일 서버간의 중계 , STATEFUL = 전송종료 명령이 보내져야 통신 종료
- POP : 서버에 저장된 메일 확인, 용량, 삭제 같은 요청을 할때 POP3를 사용 (POP3라고 버전명시 이유 : 하위버전과 버전차이가 많아서 버전을 명시한다.)

## P2P 
- 별도의 서버 필요없이 네트워크에 접속되어있는 PC간의 공유 
- 누구랑 할 수 있는지 어떻게 아는가? => 네트워크에 연결되면 "나 연결됐어요~"하고 모든 PC에게 알려서 식별할 수 있게 한다.
- 파일공유 프로토콜이고 OS에 따라 다르다. 

## FTP
- 파일전송 프로토콜 
- 주로 인터넷에 연결된 서버에 파일을 전송할때 사용
- 파일을 업로드 하거나 다운로드 , 디렉터리 생성,삭제 등을 한다. 
- 언제 사용? -> 웹 서버로 웹 페이지를 전송할때 자주 사용한다. 
- 만약 한대의 서버에서 FTP 서버프로그램과 웹 서버 프로그램을 함께 구동하고 있다면? -> FTP로 HTML파일 전송 , 이 파일을 웹 서버가 HTTP를 통해서 서비스하는 것이 가능 
- 어떻게 보낼것인가? : 파일 주고받기 = 데이터 커넥션 , 명령어 주고받기 = 컨트롤 커넥션 --> 이렇게 하면 파일 전송중에도 명령이 가능해서 중간에 명령으로 중단도 가능하다. 
    ### 액티브 모드와 패시브 모드 
    - 방화벽이나 라우터를 사용하는 겨우에는 외부와의 통신을 차단하는 경우가 많기 때문에 서버에서 외부로 나가는 통신을 막는경우가 있다. (액티브모드)
    - 이럴때에는 패시브모드를 사용한다. = 클라이언트 쪽에서 서버쪽으로 역방향 데이터 커넥션을 만들어 준다. (패시브 모드)

## VOIP
- 음성이나 영상을 주고받을때 사용하는 기술 
- 데이터용량이 크고 신뢰성 보다는 전송속도를 우선시 한다.--> UDP사용
    ### 클라이언트 서버 방식과의 조합
        - 중간에 서버를 경유하지 않고 스마트폰이나 PC끼리 통신하는 P2P를 사용하는 것이 일반적
        - 근데 누구랑 통신할지는 또 어떻게 정하지? --> 클라이언트 서버방식으로 디렉터리 서버에 접속한 후 상대를 찾고 P2P로 돌린다. = Hybrid

    ### 동영상 공유 서비스가 사용하는 프로토콜 
    - 음성이나 동영상 처리 프로토콜을 보편화되지 않았다-> 일부 네트워크 환경에서 거부 될 수 있음.(프로토콜은 성능이나 뛰어난 기술보다는 보편성이나 보급률이 중요)
    - 그럼 유튜브는? -> 동영상 프로토콜을 HTTP 안에 담아서 제공하기 때문에 차단되는 경우가 거의없다. 
